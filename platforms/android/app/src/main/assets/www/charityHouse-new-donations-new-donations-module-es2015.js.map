{"version":3,"sources":["./src/app/charityHouse/new-donations/new-donations.page.html","./src/app/charityHouse/new-donations/new-donations.module.ts","./src/app/charityHouse/new-donations/new-donations.page.scss","./src/app/charityHouse/new-donations/new-donations.page.ts"],"names":[],"mappings":"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","file":"charityHouse-new-donations-new-donations-module-es2015.js","sourcesContent":["module.exports = \"<ion-header class=\\\"ion-text-center\\\">\\r\\n    <ion-toolbar color=\\\"secondary\\\">\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n            <ion-menu-button></ion-menu-button>\\r\\n        </ion-buttons>\\r\\n        <ion-title>\\r\\n            New Donations\\r\\n        </ion-title>\\r\\n    </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content *ngIf=\\\"result.length > 0\\\">\\r\\n    <ion-row class=\\\"ion-justify-content-center\\\">\\r\\n        <ion-col class=\\\"ion-align-self-center\\\" size-md=\\\"9\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\" size-xs=\\\"12\\\" size-sm=\\\"10\\\">\\r\\n            <ion-card class=\\\"welcome-card\\\" *ngFor=\\\"let item of result\\\">\\r\\n                <ion-card-header *ngIf=\\\"item.donationType == 'food'\\\">\\r\\n                    <ion-card-title>{{item.foodName}}</ion-card-title>\\r\\n                    <ion-card-subtitle>Donated On {{item.date | date: 'MMMM d, y, h:mm a'}}</ion-card-subtitle>\\r\\n                </ion-card-header>\\r\\n                <ion-card-content *ngIf=\\\"item.donationType == 'food'\\\">\\r\\n                    <img alt=\\\"food-image\\\" [src]=\\\"item.foodImage\\\" class=\\\"food-image\\\">\\r\\n                    <div style=\\\"display: flex\\\">\\r\\n                        <p class=\\\"detail-p\\\">Food Item:</p>\\r\\n                        <p class=\\\"value-p\\\"> {{item.foodType}}, {{item.quantityValue}} {{item.quantityUnit}}</p>\\r\\n                    </div>\\r\\n                    <div style=\\\"display: flex\\\">\\r\\n                        <p class=\\\"detail-p\\\">Expiry date: </p>\\r\\n                        <p class=\\\"value-p\\\">{{item.expiryDate | date: 'MMMM d, y, h:mm a'}}</p>\\r\\n                    </div>\\r\\n                    <div class=\\\"line\\\"></div>\\r\\n                    <div>\\r\\n                        <p class=\\\"detail-p\\\">From:</p>\\r\\n                    </div>\\r\\n                    <div>\\r\\n                        <p class=\\\"detail-p\\\"> {{item.fromFirstName}} {{item.fromLastName}}</p>\\r\\n                        <p class=\\\"value-p\\\"> {{item.fromEmail}}</p>\\r\\n                    </div>\\r\\n                    <ion-row>\\r\\n                        <ion-col size-md=\\\"4\\\">\\r\\n                            <ion-button size=\\\"default\\\" (click)=\\\"acceptFood(item.id)\\\"\\r\\n                                        color=\\\"success\\\" expand=\\\"block\\\">Accept\\r\\n                            </ion-button>\\r\\n                        </ion-col>\\r\\n                        <ion-col size-md=\\\"4\\\">\\r\\n                            <ion-button size=\\\"default\\\" (click)=\\\"rejectFood(item.id)\\\"\\r\\n                                        color=\\\"danger\\\" expand=\\\"block\\\">Reject\\r\\n                            </ion-button>\\r\\n                        </ion-col>\\r\\n                        <ion-col size-md=\\\"4\\\">\\r\\n                            <ion-button size=\\\"default\\\" (click)=\\\"openChat(item.fromFirstName, item.fromLastName)\\\"\\r\\n                                        color=\\\"primary\\\" expand=\\\"block\\\">Message\\r\\n                            </ion-button>\\r\\n                        </ion-col>\\r\\n                    </ion-row>\\r\\n                </ion-card-content>\\r\\n\\r\\n                <ion-card-header *ngIf=\\\"item.donationType == 'fund'\\\">\\r\\n                    <ion-card-title>{{item.amount}} {{item.currency}}</ion-card-title>\\r\\n                    <ion-card-subtitle>Recieved On {{item.date | date: 'MMMM d, y, h:mm a'}}</ion-card-subtitle>\\r\\n                </ion-card-header>\\r\\n                <ion-card-content *ngIf=\\\"item.donationType == 'fund'\\\">\\r\\n                    <div>\\r\\n                        <p class=\\\"detail-p\\\">From:</p>\\r\\n                    </div>\\r\\n                    <div>\\r\\n                        <p class=\\\"detail-p\\\"> {{item.fromFirstName}} {{item.fromLastName}}</p>\\r\\n                        <p class=\\\"value-p\\\"> {{item.fromEmail}}</p>\\r\\n                    </div>\\r\\n                    <ion-row>\\r\\n                        <ion-col size-md=\\\"6\\\">\\r\\n                            <ion-button size=\\\"default\\\" (click)=\\\"acceptOrRejectDonation(item.id, 'accepted', '')\\\"\\r\\n                                        color=\\\"success\\\" expand=\\\"block\\\">Acknowledge\\r\\n                            </ion-button>\\r\\n                        </ion-col>\\r\\n                        <ion-col size-md=\\\"6\\\">\\r\\n                            <ion-button size=\\\"default\\\" (click)=\\\"openChat(item.fromFirstName, item.fromLastName)\\\"\\r\\n                                        color=\\\"primary\\\" expand=\\\"block\\\">Message\\r\\n                            </ion-button>\\r\\n                        </ion-col>\\r\\n                    </ion-row>\\r\\n                </ion-card-content>\\r\\n            </ion-card>\\r\\n        </ion-col>\\r\\n    </ion-row>\\r\\n</ion-content>\\r\\n\\r\\n<ion-content *ngIf=\\\"result.length == 0\\\">\\r\\n    <div class=\\\"fullheight xc\\\">\\r\\n        <div>\\r\\n            <h3 class=\\\"item-color\\\">New donations not found</h3>\\r\\n        </div>\\r\\n    </div>\\r\\n</ion-content>\\r\\n\"","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {FormsModule} from '@angular/forms';\r\nimport {Routes, RouterModule} from '@angular/router';\r\n\r\nimport {IonicModule} from '@ionic/angular';\r\n\r\nimport {NewDonationsPage} from './new-donations.page';\r\n\r\nconst routes: Routes = [\r\n    {\r\n        path: '',\r\n        component: NewDonationsPage\r\n    }\r\n];\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        RouterModule.forChild(routes)\r\n    ],\r\n    declarations: [NewDonationsPage]\r\n})\r\nexport class NewDonationsPageModule {\r\n}\r\n","module.exports = \".food-image {\\n  height: 200px;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  border-radius: 10px;\\n  margin-bottom: 15px;\\n}\\n\\n.detail-p {\\n  font-size: 17px;\\n  color: black;\\n  font-weight: bold;\\n}\\n\\n.value-p {\\n  margin: 3px 0 0 7px;\\n}\\n\\n.line {\\n  background: gray;\\n  height: 2px;\\n  margin-top: 10px;\\n  margin-bottom: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY2hhcml0eUhvdXNlL25ldy1kb25hdGlvbnMvRDpcXEZZUFxcZmVlZC10aGUtaHVuZGVyL3NyY1xcYXBwXFxjaGFyaXR5SG91c2VcXG5ldy1kb25hdGlvbnNcXG5ldy1kb25hdGlvbnMucGFnZS5zY3NzIiwic3JjL2FwcC9jaGFyaXR5SG91c2UvbmV3LWRvbmF0aW9ucy9uZXctZG9uYXRpb25zLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQTtFQUNFLGFBQUE7RUFDQSxvQkFBQTtLQUFBLGlCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQ0FGOztBREdBO0VBQ0UsZUFBQTtFQUNBLFlBQUE7RUFDQSxpQkFBQTtBQ0FGOztBREdBO0VBQ0UsbUJBQUE7QUNBRjs7QURHQTtFQUNFLGdCQUFBO0VBQ0EsV0FBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7QUNBRiIsImZpbGUiOiJzcmMvYXBwL2NoYXJpdHlIb3VzZS9uZXctZG9uYXRpb25zL25ldy1kb25hdGlvbnMucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiXHJcbi5mb29kLWltYWdlIHtcclxuICBoZWlnaHQ6IDIwMHB4O1xyXG4gIG9iamVjdC1maXQ6IGNvdmVyO1xyXG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XHJcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcclxufVxyXG5cclxuLmRldGFpbC1wIHtcclxuICBmb250LXNpemU6IDE3cHg7XHJcbiAgY29sb3I6IGJsYWNrO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59XHJcblxyXG4udmFsdWUtcCB7XHJcbiAgbWFyZ2luOiAzcHggMCAwIDdweDtcclxufVxyXG5cclxuLmxpbmUge1xyXG4gIGJhY2tncm91bmQ6IGdyYXk7XHJcbiAgaGVpZ2h0OiAycHg7XHJcbiAgbWFyZ2luLXRvcDogMTBweDtcclxuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG59XHJcbiIsIi5mb29kLWltYWdlIHtcbiAgaGVpZ2h0OiAyMDBweDtcbiAgb2JqZWN0LWZpdDogY292ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIG1hcmdpbi1ib3R0b206IDE1cHg7XG59XG5cbi5kZXRhaWwtcCB7XG4gIGZvbnQtc2l6ZTogMTdweDtcbiAgY29sb3I6IGJsYWNrO1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnZhbHVlLXAge1xuICBtYXJnaW46IDNweCAwIDAgN3B4O1xufVxuXG4ubGluZSB7XG4gIGJhY2tncm91bmQ6IGdyYXk7XG4gIGhlaWdodDogMnB4O1xuICBtYXJnaW4tdG9wOiAxMHB4O1xuICBtYXJnaW4tYm90dG9tOiAxMHB4O1xufSJdfQ== */\"","import {Component, OnInit} from '@angular/core';\r\nimport {Observable} from \"rxjs\";\r\nimport {UtilsService} from \"../../services/utils.service\";\r\nimport {Router} from \"@angular/router\";\r\nimport {Storage} from \"@ionic/storage\";\r\nimport {AuthService} from \"../../services/auth.service\";\r\nimport {ListService} from \"../../services/list.service\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {AlertController} from \"@ionic/angular\";\r\n\r\n@Component({\r\n    selector: 'app-new-donations',\r\n    templateUrl: './new-donations.page.html',\r\n    styleUrls: ['./new-donations.page.scss'],\r\n})\r\nexport class NewDonationsPage implements OnInit {\r\n\r\n    loading = true;\r\n    result: any = [];\r\n    data: Observable<any>;\r\n    user: any;\r\n\r\n    constructor(private utils: UtilsService,\r\n                public router: Router,\r\n                private storage: Storage,\r\n                private authService: AuthService,\r\n                private service: ListService,\r\n                public http: HttpClient,\r\n                private alertCtrl: AlertController) {\r\n    }\r\n\r\n    async ngOnInit() {\r\n        this.user = this.authService.getUser();\r\n        await await this.utils.presentLoading(\"Please wait...\");\r\n        this.http.get(`${this.service.homeUrl}/donations/find-by-id?id=${this.user.id}&user=ngo`,\r\n            {observe: 'response'}).subscribe(response => {\r\n            this.utils.stopLoading();\r\n            if (response.status === 200 || response.status === 201) {\r\n                console.log(response.body);\r\n                this.result = response.body;\r\n                this.result = this.result.filter(d => d.status == 'new');\r\n                localStorage.removeItem('newDonation');\r\n                localStorage.setItem('newDonation', JSON.stringify(this.result));\r\n            }\r\n        }, (error) => {\r\n            this.utils.stopLoading();\r\n            this.loadData();\r\n        });\r\n    }\r\n\r\n    loadData() {\r\n        this.result = JSON.parse(localStorage.getItem('newDonation'));\r\n    }\r\n\r\n    openChat(first: string, last: string) {\r\n        localStorage.setItem('donnerName', JSON.stringify(first.toLowerCase() + '-' + last.toLowerCase()));\r\n        this.router.navigate(['charity-house-chat']);\r\n    }\r\n\r\n    async acceptFood(id) {\r\n\r\n        let date = new Date();\r\n        let minTime = `${date.getHours()}:${date.getMinutes()}`;\r\n        let maxTime = `${date.getHours() + 5}:${date.getMinutes()}`;\r\n\r\n        const alert = await this.alertCtrl.create({\r\n            header: 'Alert !',\r\n            message: \"Please select time to pick the food.\",\r\n            inputs: [{\r\n                type: 'time',\r\n                name: 'date',\r\n                placeholder: 'Select Time',\r\n                max: `${maxTime}`,\r\n                min: `${minTime}`,\r\n            }],\r\n            buttons: [\r\n                {\r\n                    text: 'Cancel',\r\n                    role: 'cancel',\r\n                    cssClass: 'secondary',\r\n                    handler: () => {\r\n                    }\r\n                }, {\r\n                    text: 'Okay',\r\n                    cssClass: 'primary',\r\n                    handler: async (data) => {\r\n                        console.log(data.date);\r\n                        if (data.date == '') {\r\n                            await this.utils.presentAlert(\"Please select food picking time.\")\r\n                            return;\r\n                        }\r\n                        let dateTime = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${data.date}:00`;\r\n                        this.acceptOrRejectDonation(id, 'accepted', dateTime);\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        await alert.present();\r\n    }\r\n\r\n    async rejectFood(id) {\r\n        const alert = await this.alertCtrl.create({\r\n            header: 'Alert !',\r\n            message: \"Are you sure, you want to reject the Food donation?\",\r\n            buttons: [\r\n                {\r\n                    text: 'No',\r\n                    role: 'cancel',\r\n                    cssClass: 'secondary',\r\n                    handler: () => {\r\n                    }\r\n                }, {\r\n                    text: 'Yes',\r\n                    cssClass: 'primary',\r\n                    handler: () => {\r\n                        this.acceptOrRejectDonation(id, 'rejected', '');\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        await alert.present();\r\n    }\r\n\r\n    async acceptOrRejectDonation(id, status, time) {\r\n        await await this.utils.presentLoading(\"Please wait...\");\r\n        let date = new Date();\r\n        let acceptanceDate = `${date.getFullYear()}-${date.getMonth() + 1}-${date.getDate()} ${date.getHours()}:${date.getMinutes()}:${date.getSeconds()}`;\r\n        if (time != '') {\r\n            acceptanceDate = time;\r\n        }\r\n        this.http.get(`${this.service.homeUrl}/donations/update-donation-by-id?id=${id}&status=${status}&time=${acceptanceDate}`,\r\n            {observe: 'response'}).subscribe(response => {\r\n            this.utils.stopLoading();\r\n            if (response.status === 200 || response.status === 201) {\r\n                console.log(response.body);\r\n                if (response.body) {\r\n                    this.utils.presentAlert(\"Donation acknowledged. Thanks for your acknowledgement.\");\r\n                    this.deleteById(id);\r\n                } else {\r\n                    this.utils.presentAlert(\"Oops ! Something went wrong while acknowledging the fund.\");\r\n                }\r\n            }\r\n        }, (error) => {\r\n            this.utils.stopLoading();\r\n            this.loadData();\r\n        });\r\n    }\r\n\r\n    deleteById(id) {\r\n        this.result.splice(this.result.findIndex(function (i) {\r\n            return i.id === id;\r\n        }), 1);\r\n    }\r\n\r\n}\r\n"],"sourceRoot":""}